(function(t){function e(e){for(var n,i,o=e[0],c=e[1],u=e[2],l=0,d=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},a={app:0},s=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/bb-interview-app/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var p=c;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a={id:"nav"},s=Object(n["h"])("Go to post:"),i=Object(n["h"])("Â  ");function o(t,e,r,o,c,u){var p=Object(n["v"])("router-link"),l=Object(n["v"])("router-view");return Object(n["r"])(),Object(n["f"])(n["a"],null,[Object(n["g"])("div",a,[Object(n["i"])(p,{to:{name:"post",params:{id:c.id}}},{default:Object(n["B"])((function(){return[s]})),_:1},8,["to"]),i,Object(n["C"])(Object(n["g"])("input",{type:"number",min:"1",max:"100","onUpdate:modelValue":e[0]||(e[0]=function(t){return c.id=t})},null,512),[[n["z"],c.id]])]),Object(n["i"])(l)],64)}var c={name:"App",data:function(){return{id:1}}},u=(r("c921"),r("6b0d")),p=r.n(u);const l=p()(c,[["render",o]]);var d=l,h=(r("b64b"),r("6c02")),f={class:"home"};function b(t,e,r,a,s,i){return Object(n["r"])(),Object(n["f"])("div",f)}var m={name:"Home"};const y=p()(m,[["render",b]]);var v=y,j={class:"post"},O={key:0,class:"error"},g={key:1,class:"content"};function w(t,e,r,a,s,i){var o=Object(n["v"])("VideoPlayer");return Object(n["r"])(),Object(n["f"])("div",j,[s.error?(Object(n["r"])(),Object(n["f"])("div",O,Object(n["x"])(s.error),1)):Object(n["e"])("",!0),s.post?(Object(n["r"])(),Object(n["f"])("div",g,[Object(n["g"])("h2",null,Object(n["x"])(s.post.title),1),Object(n["g"])("p",null,Object(n["x"])(s.post.body),1),s.mappings[s.post.id]?(Object(n["r"])(),Object(n["d"])(o,{key:0,id:s.mappings[s.post.id],onStatisticsUpdate:i.updateUserStatistics},null,8,["id","onStatisticsUpdate"])):Object(n["e"])("",!0)])):Object(n["e"])("",!0)])}var x=r("1da1"),k=r("5530"),S=(r("96cf"),r("d3b7"),r("e9c4"),r("25f0"),r("2ef0")),P=r.n(S),U=["id"];function W(t,e,r,a,s,i){return Object(n["r"])(),Object(n["f"])("div",{id:this.uuid},null,8,U)}r("a9e3"),r("cb29");var E=0,A={name:"VideoPlayer",props:{id:{required:!0},partialWatchedEventOn:{type:Number,default:.4},steps:{type:Number,default:20}},emits:["statisticsUpdate"],data:function(){return{player:null,duration:null,completionArray:Array(this.steps).fill(!1),startStep:null,statistics:{id:this.id,partialWatched:!1,fullyWatched:!1,doneWatching:!1}}},computed:{completion:function(){var t=this.completionArray.reduce((function(t,e){return t+e}));return t/this.completionArray.length}},watch:{completion:function(t,e){t>=this.partialWatchedEventOn&&e<this.partialWatchedEventOn&&(this.statistics.partialWatched=!0,this.$emit("statisticsUpdate",this.statistics)),1===t&&(this.statistics.fullyWatched=!0,this.$emit("statisticsUpdate",this.statistics))}},methods:{getStep:function(t){var e=this.duration/this.steps,r=t-t%e;return Math.floor(r/e)}},mounted:function(){var t=this;this.player=new bluebillywig.Player("https://demo.bbvms.com/p/default/c/".concat(this.id,".json"),{target:document.getElementById(this.uuid),autoPlay:"false"}),this.player.on("loadedmetadata",(function(e){t.duration=e.target.dataset.duration})),this.player.on("playing seeked",(function(e){t.startStep=t.getStep(e.target.dataset.currenttime)})),this.player.on("pause seeking",(function(e){t.completionArray.fill(!0,t.startStep,t.getStep(e.target.dataset.currenttime)+1)})),this.player.on("ended",(function(){t.statistics.doneWatching=!0,t.$emit("statisticsUpdate",t.statistics)}))},beforeUnmount:function(){null!=this.startStep&&(this.completionArray.fill(!0,this.startStep,this.getStep(this.player.getCurrentTime())+1),!this.statistics.partialWatched&&this.completion>=this.partialWatchedEventOn&&(this.statistics.partialWatched=!0,this.$emit("statisticsUpdate",this.statistics)),this.statistics.fullyWatched||1!==this.completion||(this.statistics.fullyWatched=!0,this.$emit("statisticsUpdate",this.statistics))),this.player.off("loadedmetadata playing seeked pause seeking ended")},beforeCreate:function(){this.uuid="player-"+E.toString(),E+=1}};const R=p()(A,[["render",W]]);var $=R,_={name:"Post",components:{VideoPlayer:$},methods:{updateUserStatistics:P.a.debounce((function(t){this.$route.query.user&&this.postData("https://jsonplaceholder.typicode.com/users/".concat(this.$route.query.user),{videoStatistics:[Object(k["a"])({},t)]})}),1e3),postData:function(t,e){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch(t,{method:"PATCH",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});case 3:if(n=r.sent,!(n.status>=200&&n.status<=299)){r.next=11;break}return r.next=7,n.json();case 7:a=r.sent,console.log(a),r.next=12;break;case 11:throw Error(n);case 12:r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](0),console.log(r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,14]])})))()}},beforeRouteEnter:function(t,e,r){return Object(x["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://jsonplaceholder.typicode.com/posts/".concat(t.params.id));case 3:if(n=e.sent,!(n.status>=200&&n.status<=299)){e.next=11;break}return e.next=7,n.json();case 7:a=e.sent,r((function(t){t.post=a})),e.next=12;break;case 11:throw Error(n.status);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),r((function(t){t.error=e.t0.toString()}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()},beforeRouteUpdate:function(t,e){var r=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.post=null,r.error=null,e.prev=2,e.next=5,fetch("https://jsonplaceholder.typicode.com/posts/".concat(t.params.id));case 5:if(n=e.sent,!(n.status>=200&&n.status<=299)){e.next=12;break}return e.next=9,n.json();case 9:r.post=e.sent,e.next=13;break;case 12:throw Error(n.status);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),r.error=e.t0.toString();case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))()},data:function(){return{post:null,error:null,mappings:{76:"3888497",4:"3840255",95:"3794227",80:"3888496",48:"3841392",40:"3854512",70:"3792432",22:"3857739",49:"3888501",88:"3841384",69:"3888505",8:"3843072",72:"3792527",5:"3793879",2:"3836075",11:"3887406",86:"3888506",84:"3857741",77:"3859270",61:"3887409",43:"3887533",13:"3792514",46:"3848701",19:"3810842",87:"3835807",97:"3857738",29:"3887538",32:"3887394",30:"3792503",99:"3888500",6:"3847465",90:"3888509",45:"3888511",18:"3847483",39:"3841393",36:"3833612",56:"3841389",3:"3889860",55:"3888503",63:"3841388",44:"3845657",51:"3847489",1:"3888510",79:"3840471",57:"3864492",91:"3887534",58:"3830408",53:"3889858",9:"3894024",38:"3857740",41:"3841395",25:"3792515",64:"3887537",7:"3841391",34:"3889356",66:"3888507",74:"3833238",93:"3889862",67:"3850764",59:"3834641",31:"3841390",15:"3857737",21:"3841385",54:"3894017",10:"3889859",96:"3792509",35:"3887536",85:"3858103",14:"3888498",23:"3841295",98:"3841387",33:"3888508",16:"3841394",24:"3792595",83:"3887535",42:"3888502",62:"3889612",12:"3792472",92:"3841386",82:"3792494",89:"3832987",81:"3857736",75:"3832995",52:"3798953",71:"3847464",94:"3864669",37:"3833006",60:"3889856",78:"3847463",20:"3792511"}}}};const q=p()(_,[["render",w]]);var C=q,M=[{path:"/:id",name:"post",component:C},{path:"/",name:"home",component:v}],T=Object(h["a"])({history:Object(h["b"])("/bb-interview-app/"),routes:M});function V(t){return!!Object.keys(t.query).length}T.beforeEach((function(t,e,r){!V(t)&&V(e)?r(Object.assign({},t,{query:e.query})):r()}));var J=T;Object(n["c"])(d).use(J).mount("#app")},b5ed:function(t,e,r){},c921:function(t,e,r){"use strict";r("b5ed")}});
//# sourceMappingURL=app.7c3f7993.js.map