(function(t){function e(e){for(var r,s,i=e[0],c=e[1],u=e[2],l=0,d=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);p&&p(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={app:0},o=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/bb-interview-app/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var p=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={id:"nav"},o=Object(r["g"])("Go to post:"),s=Object(r["g"])("Â  ");function i(t,e,n,i,c,u){var p=Object(r["u"])("router-link"),l=Object(r["u"])("router-view");return Object(r["q"])(),Object(r["e"])(r["a"],null,[Object(r["f"])("div",a,[Object(r["h"])(p,{to:{name:"post",params:{id:c.id}}},{default:Object(r["A"])((function(){return[o]})),_:1},8,["to"]),s,Object(r["B"])(Object(r["f"])("input",{type:"number",min:"1",max:"100","onUpdate:modelValue":e[0]||(e[0]=function(t){return c.id=t})},null,512),[[r["y"],c.id]])]),Object(r["h"])(l)],64)}var c={name:"App",data:function(){return{id:1}}},u=(n("c921"),n("6b0d")),p=n.n(u);const l=p()(c,[["render",i]]);var d=l,f=(n("b64b"),n("6c02")),h={class:"home"};function b(t,e,n,a,o,s){return Object(r["q"])(),Object(r["e"])("div",h)}var m={name:"Home"};const y=p()(m,[["render",b]]);var v=y,j={class:"post"},O={key:0,class:"error"},g={key:1,class:"content"};function w(t,e,n,a,o,s){var i=Object(r["u"])("VideoPlayer");return Object(r["q"])(),Object(r["e"])("div",j,[o.error?(Object(r["q"])(),Object(r["e"])("div",O,Object(r["w"])(o.error),1)):Object(r["d"])("",!0),o.post?(Object(r["q"])(),Object(r["e"])("div",g,[Object(r["f"])("h2",null,Object(r["w"])(o.post.title),1),Object(r["f"])("p",null,Object(r["w"])(o.post.body),1),Object(r["h"])(i,{id:o.mappings[o.post.id],onStatisticsUpdate:s.updateUserStatistics},null,8,["id","onStatisticsUpdate"])])):Object(r["d"])("",!0)])}var x=n("1da1"),k=n("5530"),S=(n("96cf"),n("d3b7"),n("e9c4"),n("25f0"),n("2ef0")),P=n.n(S),q=["id"];function U(t,e,n,a,o,s){return Object(r["q"])(),Object(r["e"])("div",{id:this.uuid},null,8,q)}n("a9e3"),n("cb29");var E=0,W={name:"VideoPlayer",props:{id:{required:!0},partialWatchedEventOn:{type:Number,default:.4},steps:{type:Number,default:20}},emits:["statisticsUpdate"],data:function(){return{player:null,duration:null,completionArray:Array(this.steps).fill(!1),startStep:null,statistics:{partialWatched:!1,fullyWatched:!1,doneWatching:!1}}},computed:{completion:function(){var t=this.completionArray.reduce((function(t,e){return t+e}));return t/this.completionArray.length}},watch:{completion:function(t,e){t>=this.partialWatchedEventOn&&e<this.partialWatchedEventOn&&(this.statistics.partialWatched=!0,this.$emit("statisticsUpdate",this.statistics)),1===t&&(this.statistics.fullyWatched=!0,this.$emit("statisticsUpdate",this.statistics))}},methods:{getStep:function(t){var e=this.duration/this.steps,n=t-t%e;return Math.floor(n/e)}},mounted:function(){var t=this;this.player=new bluebillywig.Player("https://demo.bbvms.com/p/default/c/".concat(this.id,".json"),{target:document.getElementById(this.uuid),autoPlay:"false"}),this.player.on("loadedmetadata",(function(e){t.duration=e.target.dataset.duration})),this.player.on("playing seeked",(function(e){t.startStep=t.getStep(e.target.dataset.currenttime)})),this.player.on("pause seeking",(function(e){t.completionArray.fill(!0,t.startStep,t.getStep(e.target.dataset.currenttime)+1)})),this.player.on("ended",(function(){t.statistics.doneWatching=!0,t.$emit("statisticsUpdate",t.statistics)}))},beforeUnmount:function(){this.player.off("loadedmetadata playing seeked pause seeking ended")},beforeCreate:function(){this.uuid="player-"+E.toString(),E+=1}};const A=p()(W,[["render",U]]);var R=A,_={name:"Post",components:{VideoPlayer:R},methods:{updateUserStatistics:P.a.debounce((function(t){this.$route.query.user&&this.postData("https://jsonplaceholder.typicode.com/users/".concat(this.$route.query.user),{videoStatistics:[Object(k["a"])({id:this.post.id},t)]})}),1e3),postData:function(t,e){return Object(x["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(e),n.prev=1,n.next=4,fetch(t,{method:"PATCH",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});case 4:if(r=n.sent,!(r.status>=200&&r.status<=299)){n.next=12;break}return n.next=8,r.json();case 8:a=n.sent,console.log(a),n.next=13;break;case 12:throw Error(r);case 13:n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](1),console.log(n.t0);case 18:case"end":return n.stop()}}),n,null,[[1,15]])})))()}},beforeRouteEnter:function(t,e,n){return Object(x["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://jsonplaceholder.typicode.com/posts/".concat(t.params.id));case 3:if(r=e.sent,!(r.status>=200&&r.status<=299)){e.next=11;break}return e.next=7,r.json();case 7:a=e.sent,n((function(t){t.post=a})),e.next=12;break;case 11:throw Error(r.status);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),n((function(t){t.error=e.t0.toString()}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()},beforeRouteUpdate:function(t,e){var n=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.post=null,n.error=null,e.prev=2,e.next=5,fetch("https://jsonplaceholder.typicode.com/posts/".concat(t.params.id));case 5:if(r=e.sent,!(r.status>=200&&r.status<=299)){e.next=12;break}return e.next=9,r.json();case 9:n.post=e.sent,e.next=13;break;case 12:throw Error(r.status);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),n.error=e.t0.toString();case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))()},data:function(){return{post:null,error:null,mappings:{76:"3888497",4:"3840255",95:"3794227",80:"3888496",48:"3841392",40:"3854512",70:"3792432",22:"3857739",49:"3888501",88:"3841384",69:"3888505",8:"3843072",72:"3792527",5:"3793879",2:"3836075",11:"3887406",86:"3888506",84:"3857741",77:"3859270",61:"3887409",43:"3887533",13:"3792514",46:"3848701",19:"3810842",87:"3835807",97:"3857738",29:"3887538",32:"3887394",30:"3792503",99:"3888500",6:"3847465",90:"3888509",45:"3888511",18:"3847483",39:"3841393",36:"3833612",56:"3841389",3:"3889860",55:"3888503",63:"3841388",44:"3845657",51:"3847489",1:"3888510",79:"3840471",57:"3864492",91:"3887534",58:"3830408",53:"3889858",9:"3894024",38:"3857740",41:"3841395",25:"3792515",64:"3887537",7:"3841391",34:"3889356",66:"3888507",74:"3833238",93:"3889862",67:"3850764",59:"3834641",31:"3841390",15:"3857737",21:"3841385",54:"3894017",10:"3889859",96:"3792509",35:"3887536",85:"3858103",14:"3888498",23:"3841295",98:"3841387",33:"3888508",16:"3841394",24:"3792595",83:"3887535",42:"3888502",62:"3889612",12:"3792472",92:"3841386",82:"3792494",89:"3832987",81:"3857736",75:"3832995",52:"3798953",71:"3847464",94:"3864669",37:"3833006",60:"3889856",78:"3847463",20:"3792511"}}}};const M=p()(_,[["render",w]]);var $=M,T=[{path:"/:id",name:"post",component:$},{path:"/",name:"home",component:v}],V=Object(f["a"])({history:Object(f["b"])("/bb-interview-app/"),routes:T});function C(t){return!!Object.keys(t.query).length}V.beforeEach((function(t,e,n){!C(t)&&C(e)?n(Object.assign({},t,{query:e.query})):n()}));var J=V;Object(r["c"])(d).use(J).mount("#app")},b5ed:function(t,e,n){},c921:function(t,e,n){"use strict";n("b5ed")}});
//# sourceMappingURL=app.b62ff466.js.map